{% extends "layout/base.html" %}
{% load static %}

{% block extra_css %}
    #cesiumContainer {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        overflow: hidden;
    }

    .table-controls {
        margin-bottom: 10px;
        padding: 10px 5px 5px 5px;
        background: #eee;
        font-size: 14px;
    }


{% endblock %}

{% block extra_css_files %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gridstack@1.1.2/dist/gridstack.min.css" />
<link href="{% static 'layout/Cesium/Widgets/widgets.css' %}" rel="stylesheet">
<link href="https://unpkg.com/tabulator-tables@4.7.2/dist/css/tabulator.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}


{% block content %}

    <h1>{{ scenario.name }}</h1>
    <div class="grid-stack"></div>


{% endblock %}

{% block extra_js %}
    <script src="https://cdn.jsdelivr.net/npm/gridstack@1.1.2/dist/gridstack.all.js"></script>
    <script src="{% static 'layout/Cesium/Cesium.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.27.0/moment.min.js" integrity="sha512-rmZcZsyhe0/MAjquhTgiUcb4d9knaFc7b5xAfju483gbEXTkeJRUMIPk6s3ySZMYUHEcjKbjLjyddGWMrNEvZg==" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.7.2/dist/js/tabulator.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="{% static 'scenario/weapon_cesium_widget.js' %}"></script>
    <script src="{% static 'scenario/weapon_table_widget.js' %}"></script>

    <script type="text/javascript">

        $(document).ready(function() {

            // Setup CSRF for JQUERY
            $.ajaxSetup({
                headers: {
                    'X-CSRFTOKEN': '{{ csrf_token }}',
                }
            });

            // Initialize Gridstack
            var grid = GridStack.init();

            // Load Cesium Widget
            cesiumReloadData = loadWeaponCesium(grid, {{scenario.id}});


            // Load Table Widget
            loadWeaponTable(grid, {{scenario.id}}, cesiumReloadData);



        });

    </script>

{% endblock %}